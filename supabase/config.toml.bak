# Supabase Edge Functions Configuration

   [functions.jobs-worker]
   verify_jwt = false

   [functions.fanvue-webhook]
   verify_jwt = false

   [functions.cron-tick]
   verify_jwt = false

   [functions.oauth-callback]
   verify_jwt = false

   [functions.oauth-connect]
   verify_jwt = false
```
5. **Speichern** (Ctrl+S)

---

## **Was diese Datei macht:**

Die `config.toml` sagt Supabase:

> "Diese Functions brauchen **KEIN JWT** (kein Login-Token). Sie sollen **Ã¶ffentlich** sein, damit:
> - Fanvue Webhooks sie aufrufen kann (ohne Login)
> - Der Cron-Job sie aufrufen kann (ohne Login)
> - Du sie im Browser testen kannst (ohne Login)"

**Ohne diese Datei:** 401 Unauthorized Error (wie vorhin)  
**Mit dieser Datei:** Functions sind Ã¶ffentlich zugÃ¤nglich âœ…

---

## ğŸ¯ **Zusammenfassung - Was du tun musst:**

### **1. `llmClient.ts` anpassen:**
- âœ… Code von mir kopieren (siehe vorherige Nachricht)
- âŒ KEINE Daten hardcoden
- âœ… Alles bleibt mit `Deno.env.get(...)` 

### **2. `config.toml` erstellen:**
- âœ… Neue Datei: `supabase/config.toml`
- âœ… Inhalt einfÃ¼gen (siehe oben)
- âœ… Speichern

### **3. Secrets im Dashboard (hast du schon):**
- âœ… `LLM_API_KEY` = dein Grok Key
- âœ… `LLM_BASE_URL` = `https://api.x.ai/v1`
- âœ… `LLM_MODEL` = `grok-2-latest`

---

## ğŸ“¸ **Zur Kontrolle:**

**Wenn du fertig bist, sollte dein VS Code Explorer so aussehen:**
```
ğŸ“ fanvue-projects
â”œâ”€â”€ ğŸ“ .vscode
â”‚   â””â”€â”€ ğŸ“„ settings.json
â”œâ”€â”€ ğŸ“ admin
â”œâ”€â”€ ğŸ“ supabase
â”‚   â”œâ”€â”€ ğŸ“„ config.toml        â† NEU! Das ist wichtig!
â”‚   â”œâ”€â”€ ğŸ“ .temp
â”‚   â””â”€â”€ ğŸ“ functions
â”‚       â”œâ”€â”€ ğŸ“ _shared
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ fanvueClient.ts
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ llmClient.ts        â† Angepasst mit Grok Code
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ supabaseClient.ts   â† Bleibt unverÃ¤ndert
â”‚       â”‚   â””â”€â”€ ğŸ“„ types.ts
â”‚       â”œâ”€â”€ ğŸ“ fanvue-webhook
â”‚       â”œâ”€â”€ ğŸ“ jobs-worker
â”‚       â””â”€â”€ ...